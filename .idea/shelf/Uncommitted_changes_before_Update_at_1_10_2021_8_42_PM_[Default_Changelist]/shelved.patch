Index: app/src/main/java/com/attendo/Schedule/AddSubjectDetailsFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.attendo.Schedule;\r\n\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Spinner;\r\nimport android.widget.Toast;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.attendo.R;\r\nimport com.attendo.Schedule.Interface.UpdateRecyclerView;\r\nimport com.attendo.Schedule.Model.SubjectRoutine;\r\nimport com.attendo.data.model.CreateClass;\r\nimport com.attendo.data.model.Schedule;\r\nimport com.attendo.viewmodel.AddScheduleViewModel;\r\nimport com.attendo.viewmodel.CreateClassViewModel;\r\nimport com.attendo.viewmodel.FirebaseScheduleViewModel;\r\nimport com.attendo.viewmodel.GetScheduleViewModel;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialogFragment;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.lang.reflect.Array;\r\nimport java.util.ArrayList;\r\n\r\npublic class AddSubjectDetailsFragment extends BottomSheetDialogFragment implements AdapterView.OnItemSelectedListener {\r\n\r\n\r\n    private EditText subject, faculty, time;\r\n    private Button submit;\r\n    private LottieAnimationView celebration;\r\n    private Spinner spi;\r\n    public String day;\r\n    private AddScheduleViewModel addScheduleViewModel;\r\n    private FirebaseScheduleViewModel firebaseScheduleViewModel;\r\n\r\n    private ProgressBar PB;\r\n\r\n    //class Id\r\n    private String class_Id;\r\n\r\n    //check if data is sent to server\r\n    private boolean check = false;\r\n\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        //initial setting of data\r\n        addScheduleViewModel = new ViewModelProvider(this).get(AddScheduleViewModel.class);\r\n        class_Id = firebaseScheduleViewModel.RetrieveClassId();\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_add_subject_details, container, false);\r\n\r\n        firebaseScheduleViewModel = new ViewModelProvider(this).get(FirebaseScheduleViewModel.class);\r\n\r\n\r\n        PB = view.findViewById(R.id.progress_bar_add_subject_details);\r\n        PB.setVisibility(View.INVISIBLE);\r\n        spi = view.findViewById(R.id.spinner);\r\n        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity(), R.array.weekday, android.R.layout.simple_spinner_item);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spi.setAdapter(adapter);\r\n        spi.setOnItemSelectedListener(this);\r\n\r\n        celebration = view.findViewById(R.id.lottie_animation_add_subject_details);\r\n        celebration.setVisibility(View.INVISIBLE);\r\n\r\n        subject = view.findViewById(R.id.add_subject_bottomsheet);\r\n        faculty = view.findViewById(R.id.add_faculty);\r\n        time = view.findViewById(R.id.add_Time);\r\n        submit = view.findViewById(R.id.add_subject_btn);\r\n\r\n        submit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String sub = subject.getText().toString();\r\n                String teacher = faculty.getText().toString();\r\n                String clock = time.getText().toString();\r\n                if (sub.length() > 0 && teacher.length() > 0 && clock.length() > 0 && day.length() > 0) {\r\n                    PB.setVisibility(View.VISIBLE);\r\n                    sendDataToServer();\r\n                    if(check){\r\n                        celebration.setVisibility(View.VISIBLE);\r\n                        celebration.playAnimation();\r\n                        dismiss();\r\n                        check = false;\r\n                    }else{\r\n                        Toast.makeText(getContext(), \"Saving please wait...\", Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n\r\n                } else {\r\n                    PB.setVisibility(View.INVISIBLE);\r\n                    Toast.makeText(getActivity(), \"Please fill all details\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\r\n        day = parent.getItemAtPosition(position).toString();\r\n        day = day.toLowerCase();\r\n    }\r\n\r\n    @Override\r\n    public void onNothingSelected(AdapterView<?> parent) {\r\n\r\n    }\r\n\r\n//    private void checkUser() {\r\n//        databaseReference.orderByKey().equalTo(mAuth.getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                if (snapshot.exists()) {\r\n//                    //classid = snapshot.child(mAuth.getCurrentUser().getUid()).child(\"Class_Id\").getValue(String.class);\r\n//                    //Toast.makeText(getActivity(),\"\"+classid+\" & \"+text+\" & \"+time.getText().toString()+\" & \"+subject.getText().toString()+\" & \"+faculty.getText().toString(),Toast.LENGTH_LONG).show();\r\n//                    //Schedule schedule = new Schedule(classid, text, time.getText().toString(), subject.getText().toString(), faculty.getText().toString());\r\n//                    //addScheduleViewModel.setScheduleResponse(schedule);\r\n//                    addScheduleViewModel.getScheduleResponse().observe(getActivity(), data -> {\r\n//                        if (data == null) {\r\n//                           // Toast.makeText(getActivity(),\"Fail to Add Schedule\",Toast.LENGTH_SHORT).show();\r\n//                            Log.i(\"ApiCall\", \"Failed\");\r\n//                        } else {\r\n//                            Log.i(\"ApiCall\", \"successFull\");\r\n//                            String scheduleId = data.getSchedule().get_id();\r\n//                            databaseReference.child(mAuth.getCurrentUser().getUid()).child(\"Schedule_Id\").setValue(scheduleId);\r\n//                            Toast.makeText(getActivity(),\"Schedule Added Successfully\",Toast.LENGTH_SHORT).show();\r\n//                        }\r\n//                    });\r\n//                } else {\r\n//                    //Nothing to show here\r\n//                }\r\n//            }\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//                //Toast.makeText(getActivity(),\"\"+error,Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//    }\r\n\r\n    private void sendDataToServer(){\r\n        if(class_Id != null){\r\n            Schedule schedule = new Schedule(firebaseScheduleViewModel.RetrieveClassId(), day, time.getText().toString(), subject.getText().toString(), faculty.getText().toString());\r\n            Toast.makeText(getActivity(),\"\"+firebaseScheduleViewModel.RetrieveClassId()+\" \"+day+\" \"+time.getText().toString()+\" \"+subject.getText().toString()+\" \"+faculty.getText().toString(),Toast.LENGTH_LONG).show();\r\n            addScheduleViewModel.getScheduleResponse().observe(getActivity(), data -> {\r\n                if (data == null) {\r\n                    Toast.makeText(getActivity(),\"Fail to Add Schedule\",Toast.LENGTH_SHORT).show();\r\n                    Log.i(\"ApiCall\", \"Failed\");\r\n                    PB.setVisibility(View.INVISIBLE);\r\n                    check = true;\r\n                } else {\r\n                    PB.setVisibility(View.INVISIBLE);\r\n                    Log.i(\"ApiCall\", \"successFull\");\r\n                    String scheduleId = data.getSchedule().get_id();\r\n                    firebaseScheduleViewModel.AddClassScheduleId(scheduleId);\r\n                    Toast.makeText(getActivity(),\"Schedule Added Successfully\",Toast.LENGTH_SHORT).show();\r\n                    celebration.setVisibility(View.VISIBLE);\r\n                    celebration.playAnimation();\r\n                    check = true;\r\n                    Handler mhandler = new Handler();\r\n                    mhandler.postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            dismiss();\r\n\r\n                        }\r\n                    },600);\r\n                }\r\n            });\r\n        }else{\r\n            Toast.makeText(getContext(), \"Please Wait!\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/attendo/Schedule/AddSubjectDetailsFragment.java	(revision 8558ae77ff4e9ea16fb3a19677fc17fe235cef80)
+++ app/src/main/java/com/attendo/Schedule/AddSubjectDetailsFragment.java	(date 1610329378955)
@@ -26,6 +26,7 @@
 import com.attendo.Schedule.Model.SubjectRoutine;
 import com.attendo.data.model.CreateClass;
 import com.attendo.data.model.Schedule;
+import com.attendo.ui.CustomLoadingDialog;
 import com.attendo.viewmodel.AddScheduleViewModel;
 import com.attendo.viewmodel.CreateClassViewModel;
 import com.attendo.viewmodel.FirebaseScheduleViewModel;
@@ -38,6 +39,8 @@
 import com.google.firebase.database.FirebaseDatabase;
 import com.google.firebase.database.ValueEventListener;
 
+import org.apache.poi.ss.formula.functions.T;
+
 import java.lang.reflect.Array;
 import java.util.ArrayList;
 
@@ -51,6 +54,7 @@
     public String day;
     private AddScheduleViewModel addScheduleViewModel;
     private FirebaseScheduleViewModel firebaseScheduleViewModel;
+    private Cu
 
     private ProgressBar PB;
 
@@ -113,14 +117,12 @@
                         Toast.makeText(getContext(), "Saving please wait...", Toast.LENGTH_LONG).show();
                     }
 
-
                 } else {
                     PB.setVisibility(View.INVISIBLE);
                     Toast.makeText(getActivity(), "Please fill all details", Toast.LENGTH_SHORT).show();
                 }
             }
         });
-
         return view;
     }
 
@@ -168,14 +170,14 @@
 //    }
 
     private void sendDataToServer(){
-        if(class_Id != null){
+        if(firebaseScheduleViewModel.RetrieveClassId() != null){
             Schedule schedule = new Schedule(firebaseScheduleViewModel.RetrieveClassId(), day, time.getText().toString(), subject.getText().toString(), faculty.getText().toString());
             Toast.makeText(getActivity(),""+firebaseScheduleViewModel.RetrieveClassId()+" "+day+" "+time.getText().toString()+" "+subject.getText().toString()+" "+faculty.getText().toString(),Toast.LENGTH_LONG).show();
             addScheduleViewModel.getScheduleResponse().observe(getActivity(), data -> {
                 if (data == null) {
+                    PB.setVisibility(View.INVISIBLE);
                     Toast.makeText(getActivity(),"Fail to Add Schedule",Toast.LENGTH_SHORT).show();
                     Log.i("ApiCall", "Failed");
-                    PB.setVisibility(View.INVISIBLE);
                     check = true;
                 } else {
                     PB.setVisibility(View.INVISIBLE);
@@ -191,7 +193,6 @@
                         @Override
                         public void run() {
                             dismiss();
-
                         }
                     },600);
                 }
Index: app/src/main/java/com/attendo/Schedule/StudentDetailsInputFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.attendo.Schedule;\r\n\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Paint;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport com.attendo.R;\r\nimport com.attendo.data.model.CreateClass;\r\nimport com.attendo.data.model.JoinClass;\r\nimport com.attendo.ui.CustomLoadingDialog;\r\nimport com.attendo.viewmodel.CreateClassViewModel;\r\nimport com.attendo.viewmodel.FirebaseScheduleViewModel;\r\nimport com.attendo.viewmodel.JoinClassViewModel;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\npublic class StudentDetailsInputFragment extends Fragment {\r\n\r\n    private EditText name,scholarid,classcode;\r\n    private Button btn;\r\n    private StudentFragment studentFragment;\r\n    private JoinClassViewModel joinClassViewModel;\r\n    private FirebaseAuth mAuth;\r\n    private CustomLoadingDialog customLoadingDialog;\r\n    private FirebaseScheduleViewModel firebaseScheduleViewModel;\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        View view = inflater.inflate(R.layout.fragment_student_details_input, container, false);\r\n        ((AppCompatActivity) getActivity()).getSupportActionBar().setTitle(\"Join Class\");\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseScheduleViewModel = new ViewModelProvider(this).get(FirebaseScheduleViewModel.class);\r\n\r\n        studentFragment = new StudentFragment();\r\n        joinClassViewModel = new ViewModelProvider(this).get(JoinClassViewModel.class);\r\n        customLoadingDialog = new CustomLoadingDialog(getActivity());\r\n\r\n        name = view.findViewById(R.id.student_name_edittext);\r\n        scholarid = view.findViewById(R.id.student_scholar_id_edittext);\r\n        classcode = view.findViewById(R.id.student_class_code_edittext);\r\n        btn = view.findViewById(R.id.student_join_class_btn);\r\n\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String Name = name.getText().toString();\r\n                String Scholarid = scholarid.getText().toString();\r\n                String EmailId = mAuth.getCurrentUser().getEmail().toString();\r\n                String Class = classcode.getText().toString();\r\n                if(Name.length()>0 && Scholarid.length()>0 && EmailId.length()>0 && Class.length()>0){\r\n                    SendDataToServer();\r\n                    customLoadingDialog.startDialog(false);\r\n                }\r\n                else{\r\n                    Toast.makeText(getActivity(),\"Please fill all the fields\",Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    private void SendDataToServer() {\r\n        JoinClass joinClass = new JoinClass(classcode.getText().toString(),name.getText().toString(),mAuth.getCurrentUser().getEmail().toString(),scholarid.getText().toString());\r\n        joinClassViewModel.setJoinResponse(joinClass);\r\n        joinClassViewModel.getJoinResponse().observe(getActivity(), data -> {\r\n            customLoadingDialog.dismissDialog();\r\n            if (data == null) {\r\n                Toast.makeText(getActivity(),\"Failed to join wrong class code\",Toast.LENGTH_SHORT).show();\r\n                Log.i(\"ApiCall\", \"Failed\");\r\n            } else {\r\n                String class_Id = data.get_class().get_id();\r\n                firebaseScheduleViewModel.AddClassId(class_Id);\r\n                firebaseScheduleViewModel.AddClassJoinAs(\"Student\");\r\n                firebaseScheduleViewModel.AddCLassCode(classcode.getText().toString());\r\n                Log.i(\"ApiCall\", \"successFull\");\r\n                Toast.makeText(getContext(),\"\" + data.getMessage(),Toast.LENGTH_SHORT).show();\r\n                setFragment(studentFragment);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setFragment(Fragment fragment) {\r\n        FragmentTransaction fragmentTransaction = getParentFragmentManager().beginTransaction();\r\n        fragmentTransaction.replace(R.id.container_frame,fragment);\r\n        fragmentTransaction.commit();\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/attendo/Schedule/StudentDetailsInputFragment.java	(revision 8558ae77ff4e9ea16fb3a19677fc17fe235cef80)
+++ app/src/main/java/com/attendo/Schedule/StudentDetailsInputFragment.java	(date 1610320502256)
@@ -82,7 +82,6 @@
         JoinClass joinClass = new JoinClass(classcode.getText().toString(),name.getText().toString(),mAuth.getCurrentUser().getEmail().toString(),scholarid.getText().toString());
         joinClassViewModel.setJoinResponse(joinClass);
         joinClassViewModel.getJoinResponse().observe(getActivity(), data -> {
-            customLoadingDialog.dismissDialog();
             if (data == null) {
                 Toast.makeText(getActivity(),"Failed to join wrong class code",Toast.LENGTH_SHORT).show();
                 Log.i("ApiCall", "Failed");
